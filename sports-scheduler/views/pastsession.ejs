<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<%= csrfToken %>" />
    <script src="https://cdn.tailwindcss.com"></script>
<style>
    /* Container styles */
    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    /* Table styles */
    table {
        width: 100%;
        border-collapse: collapse;
        background-color: #ffffff;
        box-shadow: 0 0 10px skyblue;
        border-radius: 4px;
        overflow: hidden;
    }

    th,
    td {
        padding: 12px 15px;
        text-align: left;
    }

    th {
        background-color: skyblue;
        font-weight: bold;
    }

    tbody tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    /* Heading styles */
    h1 {
        text-align: center;
        color: #333333;
        margin-bottom: 20px;
    }

    /* No sessions message */
    .no-sessions {
        text-align: center;
        font-style: italic;
        color: #888888;
        margin-top: 20px;
    }

    .past-session {
        color: red;
    }

    .past-session a {
        pointer-events: none;
        color: #888888;
        cursor: not-allowed;
    }
</style>

<div class="container">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <h1>Previous <%=sportname%> Sessions</h1>
    <% if (data.length===0) { %>
        <p class="no-sessions">No previous sessions available.</p>
        <% } else { %>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Venue</th>
                        <th>Number of Teams</th>
                        <th>Number of Players</th>
                        <th>Player Names</th>
                        <th>Time</th>
                        <th>Organizer</th>
                        <th>sportname</th>
                    </tr>
                </thead>
                <tbody>
                    <% data.forEach(session=> { %>
                        <% const sessionTime=new Date(session.time); %>
                            <% const currentTime=new Date(); %>
                                <% const isPastSession=sessionTime < currentTime; %>
                                    <% if(isPastSession && session.sport_name === sportname){ %>
                                        <tr class="past-session">
                                            <td>
                                                <%= session.id %>
                                            </td>
                                            <td>
                                                <%= session.venue %>
                                            </td>
                                            <td>
                                                <%= session.teamcount %>
                                            </td>
                                            <td>
                                                <%= session.playercount %>
                                            </td>
                                            <td>
                                                <%= session.playernames %>
                                            </td>
                                            <td>
                                                <%= session.time.toLocaleString('en-US', { weekday: 'long' ,
                                                            month: 'long' , day: 'numeric' , year: 'numeric' ,
                                                            hour: 'numeric' , minute: 'numeric' , hour12: true }) %>
                                            </td>
                                            <td>
                                                <% const organizerIndex=userIds.indexOf(session.userId); %>
                                                    <%= organizerIndex !==-1 ? usernames[organizerIndex]
                                                        : 'Unknown Organizer' %>
                                            </td>
                                            <td><%= session.sport_name %></td>
                                        </tr>
                                        <% } %>
                                            <% }); %>
                </tbody>
            </table>
            <% } %>
</div>